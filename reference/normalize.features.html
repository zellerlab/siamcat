<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Perform feature normalization — normalize.features • SIAMCAT</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>
<!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>

<meta property="og:title" content="Perform feature normalization — normalize.features" />
<meta property="og:description" content="This function performs feature normalization according to user-
    specified parameters." />
<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//tr-denbi.embl.de/heimdall/";
    _paq.push(['setTrackerUrl', u+'p.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'p.js'; s.parentNode.insertBefore(g,s);
  })();
</script>

  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SIAMCAT</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.13.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/SIAMCAT_vignette.html">Get Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/SIAMCAT_vignette.html">Introduction to SIAMCAT</a>
    </li>
    <li>
      <a href="../articles/SIAMCAT_confounder.html">SIAMCAT example with confounders</a>
    </li>
    <li>
      <a href="../articles/SIAMCAT_holdout.html">Holdout testing with SIAMCAT</a>
    </li>
    <li>
      <a href="../articles/SIAMCAT_meta.html">SIAMCAT machine learning meta-analysis</a>
    </li>
    <li>
      <a href="../articles/SIAMCAT_ml_pitfalls.html">Machine learning pitfalls</a>
    </li>
    <li>
      <a href="../articles/SIAMCAT_read-in.html">SIAMCAT input formats</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/siamcat_dev">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/zellerlab/siamcat">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Perform feature normalization</h1>
    
    <div class="hidden name"><code>normalize.features.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function performs feature normalization according to user-
    specified parameters.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>normalize.features</span><span class='op'>(</span><span class='va'>siamcat</span>,
    norm.method <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"rank.unit"</span>, <span class='st'>"rank.std"</span>,
        <span class='st'>"log.std"</span>, <span class='st'>"log.unit"</span>, <span class='st'>"log.clr"</span>, <span class='st'>"std"</span>, <span class='st'>"pass"</span><span class='op'>)</span>,
    norm.param <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>log.n0 <span class='op'>=</span> <span class='fl'>1e-06</span>, sd.min.q <span class='op'>=</span> <span class='fl'>0.1</span>,
        n.p <span class='op'>=</span> <span class='fl'>2</span>, norm.margin <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>,
    feature.type<span class='op'>=</span><span class='st'>'filtered'</span>,
    verbose <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>siamcat</th>
      <td><p>an object of class <a href='siamcat-class.html'>siamcat-class</a></p></td>
    </tr>
    <tr>
      <th>norm.method</th>
      <td><p>string, normalization method, can be one of these:
'<code>c('rank.unit', 'rank.std', 'log.std', 'log.unit', 'log.clr',
'std', 'pass')</code></p></td>
    </tr>
    <tr>
      <th>norm.param</th>
      <td><p>list, specifying the parameters of the different
normalization methods, see details for more information</p></td>
    </tr>
    <tr>
      <th>feature.type</th>
      <td><p>string, on which type of features should the function
work? Can be either <code>"original"</code>, <code>"filtered"</code>, or
<code>"normalized"</code>. Please only change this paramter if you know what
you are doing!</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>integer, control output: <code>0</code> for no output at all,
<code>1</code> for only information about progress and success, <code>2</code> for
normal level of information and <code>3</code> for full debug information,
defaults to <code>1</code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>an object of class <a href='siamcat-class.html'>siamcat-class</a> with normalized features</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>There are seven different normalization methods available:</p><ul>
<li><p><code>'rank.unit'</code> - converts features to ranks and normalizes
    each column (=sample) by the square root of the sum of ranks</p></li>
<li><p><code>'rank.std'</code> - converts features to ranks and applies z-score
    standardization</p></li>
<li><p><code>'log.clr'</code> - centered log-ratio transformation (with the
    addition of pseudocounts)</p></li>
<li><p><code>'log.std'</code> - log-transforms features (after addition of
    pseudocounts) and applies z-score standardization</p></li>
<li><p><code>'log.unit'</code> - log-transforms features (after addition of
    pseudocounts) and normalizes by features or samples with different norms</p></li>
<li><p><code>'std'</code> - z-score standardization without any other
    transformation</p></li>
<li><p><code>'pass'</code> - pass-through normalization will not change the
    features</p></li>
</ul>

<p>The list entries in <code>'norm.param'</code> specify the normalzation parameters,
which are dependant on the normalization method of choice:</p><ul>
<li><p><code>'rank.unit' or 'pass'</code> does not require any other parameters</p></li>
<li><p><code>'rank.std' and 'std'</code> requires <code>sd.min.q</code>, quantile
    of the distribution of standard deviations of all features that will
    be added to the denominator during standardization in order to avoid
    underestimation of the standard deviation, defaults to 0.1</p></li>
<li><p><code>'log.clr'</code> requires <code>log.n0</code>, which is the pseudocount
    to be added before log-transformation, defaults to <code>NULL</code> leading
    to the estimation of <code>log.n0</code> from the data</p></li>
<li><p><code>'log.std'</code> requires both <code>log.n0</code> and <code>sd.min.q</code>,
    using the same default values</p></li>
<li><p><code>'log.unit'</code> requires next to <code>log.n0</code> also the
    parameters <code>n.p</code> and <code>norm.margin</code>. <code>n.p</code> specifies the
    vector norm to be used, can be either <code>1</code> for <code>x/sum(x)</code> or
    <code>2</code> for <code>x/sqrt(sum(x^2))</code>. The parameter <code>norm.margin</code>
    specifies the margin over which to normalize, similarly to the
    <code>apply</code>-syntax: Allowed values are <code>1</code> for normalization
    over features, <code>2</code> over samples, and <code>3</code> for normalization
    by the global maximum.</p></li>
</ul>

<p>The function additionally allows to perform a frozen normalization on a
different dataset. After normalizing the first dataset, the <code>norm_feat</code>
slot in the siamcat object contains all parameters of the normalization,
which you can access via the <a href='norm_params-methods.html'>norm_params</a> accessor.</p>
<p>In order to perform a frozen normalization of a new dataset, you can run the
function supplying the normalization parameters as argument to
<code>norm.param</code>:
<code>norm.param=norm_params(siamcat_reference)</code>. See also the example below.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'><span class='co'># Example data</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>siamcat_example</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Simple example</span></span>
<span class='r-in'><span class='va'>siamcat_norm</span> <span class='op'>&lt;-</span> <span class='fu'>normalize.features</span><span class='op'>(</span><span class='va'>siamcat_example</span>,</span>
<span class='r-in'>    norm.method<span class='op'>=</span><span class='st'>'rank.unit'</span><span class='op'>)</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Features normalized successfully.</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># log.unit example</span></span>
<span class='r-in'><span class='va'>siamcat_norm</span> <span class='op'>&lt;-</span> <span class='fu'>normalize.features</span><span class='op'>(</span><span class='va'>siamcat_example</span>,</span>
<span class='r-in'>    norm.method<span class='op'>=</span><span class='st'>'log.unit'</span>,</span>
<span class='r-in'>    norm.param<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>log.n0<span class='op'>=</span><span class='fl'>1e-05</span>, n.p<span class='op'>=</span><span class='fl'>1</span>, norm.margin<span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Features normalized successfully.</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># log.std example</span></span>
<span class='r-in'><span class='va'>siamcat_norm</span> <span class='op'>&lt;-</span> <span class='fu'>normalize.features</span><span class='op'>(</span><span class='va'>siamcat_example</span>,</span>
<span class='r-in'>    norm.method<span class='op'>=</span><span class='st'>'log.std'</span>,</span>
<span class='r-in'>    norm.param<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>log.n0<span class='op'>=</span><span class='fl'>1e-05</span>, sd.min.q<span class='op'>=</span><span class='fl'>.1</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Features normalized successfully.</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Frozen normalization</span></span>
<span class='r-in'><span class='va'>siamcat_norm</span> <span class='op'>&lt;-</span> <span class='fu'>normalize.features</span><span class='op'>(</span><span class='va'>siamcat</span>,</span>
<span class='r-in'>    norm.param<span class='op'>=</span><span class='fu'><a href='norm_params-methods.html'>norm_params</a></span><span class='op'>(</span><span class='va'>siamcat_reference</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-err co'><span class='r-pr'>#&gt;</span> <span class='error'>Error in (function (classes, fdef, mtable) {    methods &lt;- .findInheritedMethods(classes, fdef, mtable)    if (length(methods) == 1L)         return(methods[[1L]])    else if (length(methods) == 0L) {        cnames &lt;- paste0("\"", vapply(classes, as.character,             ""), "\"", collapse = ", ")        stop(gettextf("unable to find an inherited method for function %s for signature %s",             sQuote(fdef@generic), sQuote(cnames)), domain = NA)    }    else stop("Internal error in finding inherited methods; didn't return a unique method",         domain = NA)})(list("function"), new("standardGeneric", .Data = function (siamcat,     verbose = 1) standardGeneric("filt_feat"), generic = structure("filt_feat", package = "SIAMCAT"),     package = "SIAMCAT", group = list(), valueClass = character(0),     signature = c("siamcat", "verbose"), default = NULL, skeleton = (function (siamcat,         verbose = 1)     stop("invalid call in method dispatch to 'filt_feat' (no default method)",         domain = NA))(siamcat, verbose)), &lt;environment&gt;)</span> unable to find an inherited method for function ‘filt_feat’ for signature ‘"function"’</span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Konrad Zych, Jakob Wirbel, Georg Zeller.</p>
</div>

<div class="privacy">
  <p><strong>Privacy:</strong> Usage of this site follows
      <a href="https://www.embl.de/aboutus/privacy_policy/index.html">EMBL’s Privacy Policy</a><br/>
      In accordance with that policy, we use Matomo to collect anonymised data on visits to, downloads from, and searches of this site.
      Contact <a href="mailto:zeller@embl.de">Georg Zeller</a> for details.</p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


