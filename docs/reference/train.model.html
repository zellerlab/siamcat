<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Statistical Inference of Associations between Microbial
    Communities And host phenoTypes â€¢ SIAMCAT</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Statistical Inference of Associations between Microbial
    Communities And host phenoTypes">
<meta property="og:description" content="Pipeline for Statistical Inference of Associations between
    Microbial Communities And host phenoTypes (SIAMCAT). A primary goal
    of analyzing microbiome data is to determine changes in community
    composition that are associated with environmental factors. In particular,
    linking human microbiome composition to host phenotypes such as diseases
    has become an area of intense research. For this, robust statistical
    modeling and biomarker extraction toolkits are crucially needed. SIAMCAT
    provides a full pipeline supporting data preprocessing, statistical
    association testing, statistical modeling (LASSO logistic regression)
    including tools for evaluation and interpretation of these models (such as
    cross validation, parameter selection, ROC analysis and diagnostic
    model plots).">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//tr-denbi.embl.de/heimdall/";
    _paq.push(['setTrackerUrl', u+'p.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'p.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
</head>
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SIAMCAT</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/SIAMCAT_vignette.html">Get Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/SIAMCAT_vignette.html">Introduction to SIAMCAT</a>
    </li>
    <li>
      <a href="../articles/SIAMCAT_read-in.html">SIAMCAT input formats</a>
    </li>
    <li>
      <a href="../articles/SIAMCAT_holdout.html">Holdout testing with SIAMCAT</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/siamcat_dev">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/zellerlab/siamcat">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Model training</h1>
    
    <div class="hidden name"><code>train.model.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function trains the a machine learning model on the
    training data</p>
    
    </div>

    <pre class="usage"><span class='fu'>train.model</span>(<span class='no'>siamcat</span>,
    <span class='kw'>method</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"lasso"</span>, <span class='st'>"enet"</span>, <span class='st'>"ridge"</span>, <span class='st'>"lasso_ll"</span>,
        <span class='st'>"ridge_ll"</span>, <span class='st'>"randomForest"</span>),
    <span class='kw'>stratify</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>modsel.crit</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='st'>"auc"</span>),
    <span class='kw'>min.nonzero.coeff</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>param.set</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
    <span class='kw'>perform.fs</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
    <span class='kw'>param.fs</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>thres.fs</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>method.fs</span> <span class='kw'>=</span> <span class='st'>"AUC"</span>, <span class='kw'>direction</span><span class='kw'>=</span><span class='st'>'absolute'</span>),
    <span class='kw'>feature.type</span><span class='kw'>=</span><span class='st'>'normalized'</span>,
    <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>1</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>siamcat</th>
      <td><p>object of class <a href='siamcat-class.html'>siamcat-class</a></p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>string, specifies the type of model to be trained, may be one
of these: <code><a href='https://www.rdocumentation.org/packages/base/topics/c'>c('lasso', 'enet', 'ridge', 'lasso_ll', 'ridge_ll',
'randomForest')</a></code></p></td>
    </tr>
    <tr>
      <th>stratify</th>
      <td><p>boolean, should the folds in the internal cross-validation be
stratified?, defaults to <code>TRUE</code></p></td>
    </tr>
    <tr>
      <th>modsel.crit</th>
      <td><p>list, specifies the model selection criterion during
internal cross-validation, may contain these: <code><a href='https://www.rdocumentation.org/packages/base/topics/c'>c('auc', 'f1',
'acc', 'pr')</a></code>, defaults to <code><a href='https://www.rdocumentation.org/packages/base/topics/list'>list('auc')</a></code></p></td>
    </tr>
    <tr>
      <th>min.nonzero.coeff</th>
      <td><p>integer number of minimum nonzero coefficients that
should be present in the model (only for <code>'lasso'</code>,
<code>'ridge'</code>, and <code>'enet'</code>), defaults to <code>1</code></p></td>
    </tr>
    <tr>
      <th>param.set</th>
      <td><p>list, set of extra parameters for mlr run, may contain:</p><ul>
<li><p><code>cost</code> - for lasso_ll and ridge_ll</p></li>
<li><p><code>alpha</code> - for enet</p></li>
<li><p><code>ntree</code> and <code>mtry</code> - for RandomForrest.</p></li>
</ul><p>Defaults to <code>NULL</code></p></td>
    </tr>
    <tr>
      <th>perform.fs</th>
      <td><p>boolean, should feature selection be performed?
Defaults to <code>FALSE</code></p></td>
    </tr>
    <tr>
      <th>param.fs</th>
      <td><p>list, parameters for the feature selection, must contain:</p><ul>
<li><p><code>thres.fs</code> - threshold for the feature selection,</p></li>
<li><p><code>method.fs</code> - method for the feature selection, may be
<code>AUC</code>, <code>gFC</code>, or <code>Wilcoxon</code></p></li>
<li><p><code>direction</code> - for <code>AUC</code> and <code>gFC</code>, select either
the top associated features (independent of the sign of enrichment),
the top positively associated featured, or the top negatively
associated features, may be <code>absolute</code>, <code>positive</code>, or
<code>negative</code>. Will be ignored for <code>Wilcoxon</code>.</p></li>
</ul><p>See Details for more information.
Defaults to <code><a href='https://www.rdocumentation.org/packages/base/topics/list'>list(thres.fs=100, method.fs="AUC",
direction='absolute')</a></code></p></td>
    </tr>
    <tr>
      <th>feature.type</th>
      <td><p>string, on which type of features should the function
work? Can be either <code>"original"</code>, <code>"filtered"</code>, or
<code>"normalized"</code>. Please only change this paramter if you know what
you are doing!</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>integer, control output: <code>0</code> for no output at all,
<code>1</code> for only information about progress and success, <code>2</code> for
normal level of information and <code>3</code> for full debug information,
defaults to <code>1</code></p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>object of class <a href='siamcat-class.html'>siamcat-class</a> with added <code>model_list</code></p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This functions performs the training of the machine learning model
    and functions as an interface to the <code>mlr</code>-package.</p>
<p>The function expects a <a href='siamcat-class.html'>siamcat-class</a>-object with a prepared
    cross-validation (see <a href='create.data.split.html'>create.data.split</a>) in the
    <code>data_split</code>-slot of the object. It then trains a model for
    each fold of the datasplit.</p>
<p>For the machine learning methods that require additional
    hyperparameters (e.g. <code>lasso_ll</code>), the optimal hyperparameters
    are tuned with the function <a href='https://www.rdocumentation.org/packages/mlr/topics/tuneParams'>tuneParams</a> within the
    <code>mlr</code>-package.</p>
<p>The different machine learning methods are implemented as mlr-tasks:</p><ul>
<li><p><code>'lasso'</code>, <code>'enet'</code>, and <code>'ridge'</code> use the
    <code>'classif.cvglmnet'</code> Learner,</p></li>
<li><p><code>'lasso_ll'</code> and <code>'ridge_ll'</code> use the
    <code>'classif.LiblineaRL1LogReg'</code> and the
    <code>'classif.LiblineaRL2LogReg'</code> Learners respectively</p></li>
<li><p><code>'randomForest'</code> is implemented via the
    <code>'classif.randomForest'</code> Learner.</p></li>
</ul>
    <p>The function can also perform feature selection on each individual fold.
    At the moment, three methods for feature selection are implemented:</p><ul>
<li><p><code>'AUC'</code> - computes the Area Under the Receiver Operating
        Characteristics Curve for each single feature and selects the top
        <code>param.fs$thres.fs</code>, e.g. 100 features</p></li>
<li><p><code>'gFC'</code> - computes the generalized Fold Change (see
        <a href='check.associations.html'>check.associations</a>) for each feature and likewise selects the
        top <code>param.fs$thres.fs</code>, e.g. 100 features</p></li>
<li><p><code>Wilcoxon</code> - computes the p-Value for each single feature
        with the Wilcoxon test and selects features with a p-value smaller
        than <code>param.fs$thres.fs</code></p></li>
</ul><p>For <code>AUC</code> and <code>gFC</code>, feature selection can also be directed,
    that means that the features will be selected either based on the
    overall association (<code>absolute</code> - <code>gFC</code> will be converted to
    absolute values and <code>AUC</code> values below <code>0.5</code> will be
    converted by <code>1 - AUC</code>), or on associations in a certain direction
    (<code>positive</code> - positive enrichment as measured by positive values
    of the <code>gFC</code> or <code>AUC</code> values higher than  <code>0.5</code> - and
    reversely for <code>negative</code>).</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>siamcat_example</span>)

<span class='co'># simple working example</span>
<span class='no'>siamcat_example</span> <span class='kw'>&lt;-</span> <span class='fu'>train.model</span>(<span class='no'>siamcat_example</span>, <span class='kw'>method</span><span class='kw'>=</span><span class='st'>'lasso'</span>)</div><div class='output co'>#&gt; <span class='message'>Trained lasso models successfully.</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Konrad Zych, Jakob Wirbel, Georg Zeller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

